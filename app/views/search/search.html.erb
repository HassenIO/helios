<%= filepicker_js_include_tag %>


<div class="row-fluid">
  <%= render 'form' %>
</div>

<div class="row-fluid">
  <div class="span12">
    <% if @travels.empty? %>
        <h3><%= t(".no_results") %></h3>
    <% else %>
        <h3><%= t(".results", :nbCars => @travels.size, :airPort => @rent.airPort.name, :startDate => @rent.startDate, :endDate => @rent.endDate) %></h3>
    <% end %>
  </div>
</div>

<% @travels.each do |travel| %>

    <div class="well">
      <div class="row-fluid">


        <div class="span3">
          <% if travel.car %>
              <% if travel.car.filepicker1_url %>
                  <%= filepicker_image_tag travel.car.filepicker1_url, width: 100, height: 100, fit: 'clip', class: 'pull-left' %>
              <% end %>
          <% end %>
        </div>

        <div class="span5">

          <% if travel.car %>
              <p> <%= travel.car.try { |car| [car.year,car.brand,car.model].join(' - ') } %> </p>

              <p> <%= travel.car.category.try { |category| category.name } %>,  <%= t("helpers.label.car.nbSeats") %>: <%= travel.car.nbSeats %></p>

              <p> <%= [travel.car.km, t(travel.car.fuel, :scope => [:helpers, :label, :car]), t(travel.car.transmission, :scope => [:helpers, :label, :car])].join(', ') %></p>
          <% end %>

        </div>

        <div class="span4">
          <% if travel.car.category %>

              <p><%= t(:interval_datetime, :startDate => l(@rent.startDate), :endDate => l(@rent.endDate)) %></p>

              <p><%= distance_of_time_in_words(@rent.endDate, @rent.startDate) %>,
              <%= number_to_currency(travel.car.category.price) %> <%= t(:byDay) %> </p>

              <p><%= t(:total) %>: <%= compute_price_for_rent(@rent.startDate, @rent.endDate, travel.car.category.price) %></p>

              <%= link_to t('.rent'), user_travel_url(travel.user, travel, :rent => params[:rent]), :class => "btn btn-primary" %>
          <% end %>
        </div>

      </div>
    </div>


<% end %>



